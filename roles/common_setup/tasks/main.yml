- name: Install common build tools and system dependencies
  ansible.builtin.dnf:
    name:
      - gcc
      - make
      - openssl-devel
      - bzip2
      - libffi-devel
      - git
      - tar
      - dnf-plugins-core
    state: present
    update_cache: yes

- name: Ensure python3-pip is installed
  ansible.builtin.dnf:
    name: python3-pip
    state: present

- name: Install PyMySQL via pip for Ansible's MySQL modules
  ansible.builtin.pip:
    name: PyMySQL
    executable: pip3
    state: present

- name: Install MariaDB client (replaces MySQL CLI)
  ansible.builtin.dnf:
    name: mariadb105
    state: present
